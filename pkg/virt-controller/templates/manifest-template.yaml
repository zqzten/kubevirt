apiVersion: v1
kind: Pod
metadata:
  name: virt-launcher-{{.Domain}}
  labels:
    app: virt-launcher
    domain: {{.Domain}}
spec:
  hostNetwork: true
  volumes:
  - name: var-lib-virt-qemu
    hostPath:
      path: /var/lib/libvirt/qemu
  - name: var-run-virt
    hostPath:
      path: /var/run/libvirt
  - name: var-domain-xml
    hostPath:
      path: /etc/vdsm/dom/
  - name: rhev-storage
    hostPath:
      path: /rhev/data-center/
  containers:
  - name: compute
    image: {{.DockerRegistry}}/{{.LauncherImage}}
    imagePullPolicy: IfNotPresent
    command:
        - "/virt-launcher"
        - "-domain-path"
        - "/etc/vdsm/dom/{{.Domain}}.xml"
    securityContext:
      privileged: true
    volumeMounts:
    - name: var-lib-virt-qemu
      mountPath: /var/lib/libvirt/qemu
    - name: var-run-virt
      mountPath: /var/run/libvirt
    - name: var-domain-xml
      mountPath: /etc/vdsm/dom/
    - name: rhev-storage
      mountPath: /rhev/data-center/
